<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <!-- Dotyka훾ka Sync Log Form View -->
        <record id="view_dotykacka_sync_log_form" model="ir.ui.view">
            <field name="name">dotykacka.sync.log.form</field>
            <field name="model">dotykacka.sync.log</field>
            <field name="arch" type="xml">
                <form string="Sync Log" create="false" edit="false">
                    <sheet>
                        <group>
                            <group>
                                <field name="config_id"/>
                                <field name="log_type"/>
                                <field name="direction"/>
                                <field name="endpoint"/>
                                <field name="status_code"/>
                                <field name="success"/>
                            </group>
                            <group>
                                <field name="create_date"/>
                                <field name="order_id"/>
                                <field name="customer_id"/>
                                <field name="product_id"/>
                                <field name="invoice_id"/>
                                <field name="payment_id"/>
                            </group>
                        </group>

                        <notebook>
                            <page string="Request Data" name="request">
                                <field name="request_data" widget="text"/>
                            </page>
                            <page string="Response Data" name="response">
                                <field name="response_data" widget="text"/>
                            </page>
                            <page string="Error Message" name="error" invisible="not error_message">
                                <field name="error_message" widget="text"/>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- Dotyka훾ka Sync Log Tree View -->
        <record id="view_dotykacka_sync_log_tree" model="ir.ui.view">
            <field name="name">dotykacka.sync.log.tree</field>
            <field name="model">dotykacka.sync.log</field>
            <field name="arch" type="xml">
                <tree string="Sync Logs" create="false" edit="false">
                    <field name="create_date"/>
                    <field name="config_id"/>
                    <field name="log_type"/>
                    <field name="direction"/>
                    <field name="endpoint"/>
                    <field name="status_code"/>
                    <field name="success"
                           decoration-success="success == True"
                           decoration-danger="success == False"/>
                </tree>
            </field>
        </record>

        <!-- Dotyka훾ka Sync Log Search View -->
        <record id="view_dotykacka_sync_log_search" model="ir.ui.view">
            <field name="name">dotykacka.sync.log.search</field>
            <field name="model">dotykacka.sync.log</field>
            <field name="arch" type="xml">
                <search string="Sync Logs">
                    <field name="config_id"/>
                    <field name="log_type"/>
                    <field name="endpoint"/>
                    <filter string="Success" name="filter_success" domain="[('success', '=', True)]"/>
                    <filter string="Failed" name="filter_failed" domain="[('success', '=', False)]"/>
                    <separator/>
                    <filter string="Auth" name="filter_auth" domain="[('log_type', '=', 'auth')]"/>
                    <filter string="API" name="filter_api" domain="[('log_type', '=', 'api')]"/>
                    <filter string="Webhook" name="filter_webhook" domain="[('log_type', '=', 'webhook')]"/>
                    <filter string="Sync" name="filter_sync" domain="[('log_type', '=', 'sync')]"/>
                    <filter string="Error" name="filter_error" domain="[('log_type', '=', 'error')]"/>
                    <separator/>
                    <filter string="Today" name="filter_today" domain="[('create_date', '&gt;=', datetime.datetime.now().replace(hour=0, minute=0, second=0))]"/>
                    <filter string="Last 7 Days" name="filter_week" domain="[('create_date', '&gt;=', (datetime.datetime.now() - datetime.timedelta(days=7)).strftime('%Y-%m-%d'))]"/>
                    <group expand="0" string="Group By">
                        <filter string="Configuration" name="group_config" context="{'group_by': 'config_id'}"/>
                        <filter string="Log Type" name="group_type" context="{'group_by': 'log_type'}"/>
                        <filter string="Direction" name="group_direction" context="{'group_by': 'direction'}"/>
                        <filter string="Date" name="group_date" context="{'group_by': 'create_date:day'}"/>
                    </group>
                </search>
            </field>
        </record>

        <!-- Dotyka훾ka Sync Log Action -->
        <record id="action_dotykacka_sync_log" model="ir.actions.act_window">
            <field name="name">Sync Logs</field>
            <field name="res_model">dotykacka.sync.log</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'search_default_filter_week': 1}</field>
        </record>

    </data>
</odoo>
